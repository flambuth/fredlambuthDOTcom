{% extends 'base.html' %}

{% block content %}

<title>Blog Post: {{ post.title }}</title>

<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/blog.css') }}">
<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/spotify.css') }}">

<style>
    .list-group-item {
        color: #000; 
        background-color: #fff; 
    }

    .list-group-item:hover {
        color: #fff; 
        background-color: #296c6e; 
    }

    .list-group-item.list-group-item-primary {
        color: #fff; 
        background-color: #023022; 
    }

</style>


<body class="w3-black">

<div class="w3-container">
        
    {% include 'blog/blog_header.html' %}

    <hr>


    <div class="row">
        <div class="col-md d-flex align-items-center justify-content-center">
            <img src="{{url_for('static', filename='img/blog_pics/pic_' + post.id|string + '.jpg')}}" width="360" title="Rando off the street.">
        </div>
        <div class="col"> 
            <section class="text-end w3-teal w3-margin-top"> 
                <h4 style="padding-left: 10px;"><b>{{ post.title }}</b></h4>
                
                <small style='padding-left: 10px;' class="date-pill">
                    <a href="{{ url_for('spotify.tracks_prev', year=post.iso_date.split('-')[0], month=post.iso_date.split('-')[1], day=post.iso_date.split('-')[2]) }}">
                        {{ post.post_date }}
                    </a>
                </small>
                
                <div class="list-group">
                    <h6 class="list-group-item list-group-item-primary">Top Tracks on {{ post.iso_date }}</h6>
                    {% for track in top_3_songs %}
                        <a href="https://open.spotify.com/track/{{ track.song_id }}" class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <b>{{ track.song_name }}</b> by <b>{{ track.art_name }}</b>
                        </div>

                    </a>
                    {% endfor %}
                </div>
            </section>
        </div>
    </div>
    <hr>
        <div class="w3-container w3-pale-green" style="border: solid 4px #296c6e; padding: 55px;">
            <p>{% autoescape false %} {{ post.content | replace('\n', '<br>') }} {% endautoescape %}</p>
        </div>
    <hr>

    {% for comment in comments %}
    <div style="background-color: #296c6e; padding: 10px; margin-bottom: 10px;">
        <p style="background-color: wheat; color: #020f0b;">{{ comment.content }}</p>
        <img src="{{ url_for('static', filename='img/user_pics/' + comment.user.username + '.jpg') }}" alt="User Profile Image" style="width: 100px; height: 100px;">
        <small style="color: wheat;">{{ comment.user.username }} - {{ comment.comment_date }}</small>
    </div>
    {% endfor %}
    <a href="{{ url_for('blog.blog_add_comment', post_id=post.id) }}" class="btn btn-primary">Add Comment</a>

    <!-- Next and Previous Post Links -->
    {% if next_post or prev_post %}
        <div class="mt-3">
            {% if next_post %}
                <span>
                    <a class='next-post btn btn-secondary' href="{{url_for('blog.blog_single', post_id=next_post.id ) }}">
                        {{ 'Next' }}
                    </a>
                </span>
            {% endif %}
            {% if next_post and prev_post %} || {% endif %}
            {% if prev_post %}
                <span>
                    <a class='prev-post btn btn-secondary' href="{{url_for('blog.blog_single', post_id=prev_post.id ) }}">
                        {{ 'Previous' }}
                    </a>
                </span>
            {% endif %}
        </div>
    {% endif %}
</div>
<br>
</div>




{% endblock %}